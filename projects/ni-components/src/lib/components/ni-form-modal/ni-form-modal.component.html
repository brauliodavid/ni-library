<div class="{{formClass}}">
	<div class="dialog-header">
		<h5>{{title}}</h5>
		<ni-alert *ngFor="let note of notes" [type]="note.type">{{note.content}}</ni-alert>
	</div>
	<div class="dialog-content" [formGroup]="fieldsArray">
		<div *ngFor="let field of fieldsArray.controls, let i =index" [formGroupName]="i" class="field-control {{field.value.fieldClass}}">
			<mat-form-field *ngIf="field.value.type === 'text'">
				<input matInput [placeholder]="field.value.label" formControlName="value" autocomplete="off">
				<mat-hint *ngIf="field.value.instructions" align="start"><strong>{{field.value.instructions}}</strong></mat-hint>
				<mat-error *ngIf="field.get('value').hasError('required')">
					{{field.value.label}} is <strong>required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field *ngIf="field.value.type === 'number'">
				<input matInput type="number" [placeholder]="field.value.label" formControlName="value" autocomplete="off">
				<mat-hint *ngIf="field.value.instructions" align="start"><strong>{{field.value.instructions}}</strong></mat-hint>
				<mat-error *ngIf="field.get('value').hasError('required')">
					{{field.value.label}} is <strong>required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field *ngIf="field.value.type === 'textarea'">
				<textarea matInput [placeholder]="field.value.label" formControlName="value"></textarea>
				<mat-hint *ngIf="field.value.instructions" align="start"><strong>{{field.value.instructions}}</strong></mat-hint>
				<mat-error *ngIf="field.get('value').hasError('required')">
					{{field.value.label}} is <strong>required</strong>
				</mat-error>
			</mat-form-field>
			<!--<mat-form-field *ngIf="field.value.type === 'date'">
				<input matInput [matDatepicker]="dpField" [placeholder]="field.value.label" [min]="getMinDate(field)" formControlName="value">
				<mat-datepicker-toggle matSuffix [for]="dpField"></mat-datepicker-toggle>
				<mat-datepicker #dpField [startAt]="field.value.startAt ? field.value.startAt : false"></mat-datepicker>
				<mat-hint *ngIf="field.value.instructions" align="start"><strong>{{field.value.instructions}}</strong></mat-hint>
				<mat-error *ngIf="field.get('value').hasError('required')">
					{{field.value.label}} is <strong>required</strong>
				</mat-error>
			</mat-form-field>-->
			<ni-datepicker *ngIf="field.value.type === 'date'" formControlName="value" [placeholder]="field.value.label"></ni-datepicker>
			<ni-select *ngIf="field.value.type === 'select'" [placeholder]="field.value.label" formControlName="value" (opened)="field.value.hasOwnProperty('onOpen') ? field.value['onOpen']() : ''">
				<ni-option *ngFor="let choice of field.value.choices" [value]="choice.value" [viewValue]="choice.label"></ni-option>
			</ni-select>
			<div *ngIf="field.value.type === 'radio'">
				<label class="label-radio-list">{{field.value.label}}</label>
				<mat-radio-group formControlName="value" class="radio-list">
					<mat-radio-button *ngFor="let choice of field.value.choices" [value]="choice.value">{{choice.label}}</mat-radio-button>
				</mat-radio-group>
			</div>
			<ni-chips-select *ngIf="field.value.type === 'chips-select'" formControlName="value" [placeholder]="field.value.label" [instructions]="field.value.instructions" [choices]="field.value.choices"></ni-chips-select>
			<div *ngIf="field.value.type === 'checkbox'">
				<label class="label-radio-list">{{field.value.label}}</label>
				<mat-checkbox *ngFor="let choice of field.value.choices, let c = index" [checked]="checkedChoice(field, c)" (change)="changeCheckbox(field, c)" class="checkbox-item">{{choice.label}}</mat-checkbox>
			</div>
		</div>
	</div>
	<div class="dialog-actions">
		<div class="dialog-action">
			<button mat-button color="warn" (click)="onNoClick()">{{cancelLabel ? cancelLabel : 'Cancel'}}</button>
		</div>
		<div class="dialog-action">
			<button mat-button color="primary" (click)="onClick()">{{okLabel ? okLabel : 'Ok'}}</button>
		</div>
	</div>
</div>
